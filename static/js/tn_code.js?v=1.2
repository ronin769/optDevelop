!function(n){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=67)}({5:function(e,t){e.exports=function(e,t){for(var n=document.querySelectorAll(".simpleTips"),a=0;a<n.length;a++){var r=n[a];r.parentNode&&r.parentNode.removeChild(r)}t=+t||1500;var s=document.createElement("div");return s.className="simpleTips",s.setAttribute("style","width:200px;line-height:36px;padding:8px 0; font-size:14px; color:#fff; text-align:center; background:rgba(0,0,0,.5); position:fixed; left:50%; margin-left:-100px; top:50%; margin-top:-32px; z-index:999999999999999999999; -webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;border-radius:5px;"),s.innerHTML=e,document.body.appendChild(s),setTimeout(function(){s.parentNode&&s.parentNode.removeChild(s)},t),s}},67:function(e,t,n){var a=n(5);function s(e,t){return 0!=(t=t||"").replace(/\s/g,"").length&&new RegExp(" "+t+" ").test(" "+e.className+" ")}document.getElementByClassName=function(e,t){for(var n=document.getElementsByTagName("*"),a=[],r=0;r<n.length;r++)s(n[r],e)&&a.push(n[r]);return-1==(t=t||0)?a:a[t]};function r(){}var f={_obj:null,_tncode:null,_img:null,_img_loaded:!(r.prototype={request:function(e,t,n,a){var r=this.createXhrObject()();r.onreadystatechange=function(){4===r.readyState&&(200===r.status?n.success(r.responseText,r.responseXML):n.failure(r,status))},"POST"!==e&&a&&(t+="?"+this.JSONStringify(a),a=null),r.open(e,t,!0),r.send(a)},createXhrObject:function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=0,n=e.length;t<n;t++)return this.createXhrObject=e[t],e[t];throw new Error("ajax created failure")},JSONStringify:function(e){return JSON.stringify(e).replace(/"|{|}/g,"").replace(/b:b/g,"=").replace(/b,b/g,"&")}}),_is_draw_bg:!1,_is_moving:!1,_block_start_x:0,_block_start_y:0,_doing:!1,_mark_w:50,_mark_h:50,_mark_offset:0,_img_w:240,_img_h:150,_result:!1,_err_c:0,_onsuccess:null,_bind:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n),!0):e.attachEvent?e.attachEvent(t,n):void 0},_block_start_move:function(e){if(!f._doing&&f._img_loaded){e.preventDefault();var t=window.event||e;t.touches&&(t=t.touches[0]),document.getElementByClassName("slide_block_text").style.display="none",f._draw_bg(),f._block_start_x=t.clientX,f._block_start_y=t.clientY,f._doing=!0,f._is_moving=!0}},_block_on_move:function(e){if(!f._doing)return!0;if(!f._is_moving)return!0;var t=window.event||e;t.touches&&(t=t.touches[0]),f._is_moving=!0;var n=t.clientX-f._block_start_x;n<0&&(n=0);var a=f._img_w-f._mark_w;a<n&&(n=a),document.getElementByClassName("slide_block").style.cssText="transform: translate("+n+"px, 0px)",f._mark_offset=n/a*(f._img_w-f._mark_w),f._draw_bg(),f._draw_mark()},_block_on_end:function(e){if(!f._doing)return!0;e.preventDefault();var t=window.event||e;t.touches&&(t=t.touches[0]),f._is_moving=!1,f._send_result()},_send_result:function(){var e={success:f._send_result_success,failure:f._send_result_failure};f._result=!1,(new r).request("get",pageConf.check+"&tn_r="+f._mark_offset+"&mobile="+$(".tel").val(),e)},_send_result_success:function(e){var t=JSON.parse(e);if(f._doing=!1,f._onsuccess&&f._onsuccess(t),t.entry&&"验证成功"==t.entry.msg)f._showmsg("√验证成功",1),f._result=!0,document.getElementByClassName("hgroup").style.display="block",setTimeout(f.hide,3e3);else{var n=document.getElementById("tncode_div");!function(e,t){s(e,t)||(e.className+=" "+t)}(n,"dd"),setTimeout(function(){!function(e,t){s(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," "))}(n,"dd")},200),f._result=!1,f._showmsg("验证失败"),f._err_c++,5<f._err_c&&f.refresh()}},_send_result_failure:function(){},_draw_fullbg:function(){document.getElementByClassName("tncode_canvas_bg").getContext("2d").drawImage(f._img,0,2*f._img_h,f._img_w,f._img_h,0,0,f._img_w,f._img_h)},_draw_bg:function(){f._is_draw_bg||(f._is_draw_bg=!0,document.getElementByClassName("tncode_canvas_bg").getContext("2d").drawImage(f._img,0,0,f._img_w,f._img_h,0,0,f._img_w,f._img_h))},_draw_mark:function(){var e=document.getElementByClassName("tncode_canvas_mark"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.drawImage(f._img,0,f._img_h,f._mark_w,f._img_h,f._mark_offset,0,f._mark_w,f._img_h);for(var n=t.getImageData(0,0,f._img_w,f._img_h),a=n.data,r=f._img_h,s=f._img_w,o=0;o<r;o++)for(var c=1,i=-1,l=0;l<s&&0<=l&&i<l;){var _=4*(o*s+l);if(l+=c,a[_]+a[_+1]+a[_+2]<200)a[_+3]=0;else{var d=[1,-5],m=[250,0];for(_=1;_<d[0]-d[1];_++){var u=d[0]-1*_,g=parseInt(m[0]-(m[0]-m[1])/(d[0]-d[1])*_);a[3+4*(o*s+l+u*c)]=g}if(-1==c)break;i=l,l=s-1,c=-1}}t.putImageData(n,0,0)},_reset:function(){f._mark_offset=0,f._draw_bg(),f._draw_mark(),document.getElementByClassName("slide_block").style.cssText="transform: translate(0px, 0px)"},show:function(){var e=$(".form");if("true"!=$(".getmsmcode").attr("isclick"))return!1;if($('[vtype="mobile"], .code',e).validate()){var t=document.getElementByClassName("hgroup");t&&(t.style.display="none"),f.refresh(),f._tncode=this,document.getElementById("tncode_div_bg").style.display="block",document.getElementById("tncode_div").style.display="block"}else $(".getmsmcode").attr("isclick","true")},hide:function(){document.getElementById("tncode_div_bg").style.display="none",document.getElementById("tncode_div").style.display="none"},_showmsg:function(e,c){if(c)i=document.getElementByClassName("tncode_msg_ok");else{c=0;var i=document.getElementByClassName("tncode_msg_error")}i.innerHTML=e;var l=function(e,t){null!=e.style.opacity?e.style.opacity=t/100:e.style.filter="alpha(opacity="+t+")"};!function(e,t,n){if(e){var a=e.style.filter.replace("alpha(opacity=","").replace(")","")||e.style.opacity;a<1&&(a*=100);var r=n/1e3,s=r<2?t/r:t/r-1,o=null;o=setInterval(function(){a<t?l(e,a+=s):(clearInterval(o),setTimeout(function(){!function(e,t,n){if(e){var a=e.style.filter.replace("alpha(opacity=","").replace(")","")||e.style.opacity||100;a<1&&(a*=100);var r=(100-t)/(n/1e3),s=null;s=setInterval(function(){t<a-r?l(e,a-=r):(l(e,0),0==c&&f._reset(),clearInterval(s))},100)}}(i,0,6e3)},1e3))},100)}}(i,80,4e3)},_html:function(){if(!document.getElementById("tncode_div_bg")){!function(e,t){var n=document.createElement("div"),a=null,r=document.createDocumentFragment();n.innerHTML=t;for(var s=0,o=(a=n.childNodes).length;s<o;s+=1)r.appendChild(a[s].cloneNode(!0));e.appendChild(r),r=a=null}(document.getElementsByTagName("body")[0],'<div class="tncode_div_bg" id="tncode_div_bg"></div><div class="tncode_div" id="tncode_div"><canvas class="tncode_canvas_bg"></canvas><canvas class="tncode_canvas_mark"></canvas><div class="hgroup"></div><div class="tncode_msg_error"></div><div class="tncode_msg_ok"></div><div class="slide"><div class="slide_block"></div><div class="slide_block_text">拖动左边滑块完成上方拼图</div></div><div class="tools"><div class="tncode_close"></div><div class="tncode_refresh"></div><div class="tncode_tips"></div></div></div>')}},_currentUrl:function(){var e=document.getElementsByTagName("script");for(var t in e){var n=e[t];if(-1!==n.src.indexOf("tn_code"))return n.src.split("tn_code")[0]}},refresh:function(){var e=!![].map&&0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp");f._err_c=0,f._is_draw_bg=!1,f._result=!1,f._img_loaded=!1;var t=document.getElementByClassName("tncode_canvas_bg");t.style.display="none",(t=document.getElementByClassName("tncode_canvas_mark")).style.display="none",f._img=new Image;var n=pageConf.getIMG+"&t="+Date.parse(new Date);e||(n+="&nowebp=1"),f._img.src=n,f._img.onload=function(){f._draw_fullbg();var e=document.getElementByClassName("tncode_canvas_mark");e.getContext("2d").clearRect(0,0,e.width,e.height),f._img_loaded=!0,(t=document.getElementByClassName("tncode_canvas_bg")).style.display="",(t=document.getElementByClassName("tncode_canvas_mark")).style.display=""},(t=document.getElementByClassName("slide_block")).style.cssText="transform: translate(0px, 0px)",(t=document.getElementByClassName("slide_block_text")).style.display="block"},init:function(){var e=this;if(e._html(),!f._img){var t=document.getElementByClassName("slide_block");f._bind(t,"mousedown",e._block_start_move),f._bind(document,"mousemove",e._block_on_move),f._bind(document,"mouseup",e._block_on_end),f._bind(t,"touchstart",e._block_start_move),f._bind(document,"touchmove",e._block_on_move),f._bind(document,"touchend",e._block_on_end);t=document.getElementByClassName("tncode_close");f._bind(t,"touchstart",e.hide),f._bind(t,"click",e.hide);t=document.getElementByClassName("tncode_refresh");f._bind(t,"touchstart",e.refresh),f._bind(t,"click",e.refresh);var n=document.getElementByClassName("tncode",-1);for(var a in n){var r=n[a];f._bind(r,"touchstart",e.show),f._bind(r,"click",e.show)}}},result:function(){return f._result},onsuccess:function(e){f._onsuccess=e}};$(document).on("ready",function(){f.init(),f.onsuccess(function(e){$(".getmsmcode").attr("isclick","flase");var t=null,n=60;e.entry&&"succ"==e.entry.status?(a(e.entry.msg),t=setInterval(function(){n--,$(".getmsmcode").html(n+"S"),0==n&&($(".getmsmcode").html("重新发送"),clearInterval(t),$(".getmsmcode").attr("isclick","true"))},1e3)):(a(e.error),$(".getmsmcode").attr("isclick","true"))})})}});